(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15e6a010"],{1511:function(s,e,t){"use strict";t.r(e);var r=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[t("v-container",[t("h5",{staticClass:"text-h5 font-weight-light ml-4 my-4 justify-start"},[s._v(" Пользователь ")]),t("v-divider"),t("v-form",{staticClass:"mx-auto"},[t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"12",md:"4"}},[t("v-text-field",{attrs:{label:"Имя","error-messages":s.$v.$error?s.nameErrors:[]},model:{value:s.user.name,callback:function(e){s.$set(s.user,"name",e)},expression:"user.name"}})],1),t("v-col",{attrs:{cols:"12",md:"4"}},[t("v-text-field",{attrs:{label:"Фамилия","error-messages":s.$v.$error?s.surnameErrors:[]},model:{value:s.user.surname,callback:function(e){s.$set(s.user,"surname",e)},expression:"user.surname"}})],1),t("v-col",{attrs:{cols:"12",md:"4"}},[t("v-text-field",{attrs:{label:"Email","error-messages":s.$v.$error?s.emailErrors:[]},model:{value:s.user.email,callback:function(e){s.$set(s.user,"email","string"===typeof e?e.trim():e)},expression:"user.email"}})],1)],1)],1)],1),t("div",{staticClass:"d-flex justify-space-between"},[t("v-bottom-sheet",{staticClass:"mx-auto",attrs:{persistent:""},scopedSlots:s._u([{key:"activator",fn:function(e){e.on,e.attrs;return[t("v-btn",{staticClass:"ml-4",attrs:{color:"primary",elevation:"9"},on:{click:s.onSubmit}},[s._v("Обновить "),t("v-icon",{attrs:{right:"",dark:""}},[s._v("mdi-cloud-upload")])],1)]}}]),model:{value:s.sheet,callback:function(e){s.sheet=e},expression:"sheet"}},[t("v-sheet",{staticClass:"text-center",attrs:{height:"200px"}},[t("v-container",[t("v-text-field",{attrs:{type:"password",label:"Введите ваш пароль","error-messages":s.$v.$error?s.passwordErrors:[]},model:{value:s.user.password,callback:function(e){s.$set(s.user,"password","string"===typeof e?e.trim():e)},expression:"user.password"}}),s.message?t("v-card-text",[s._v(s._s(s.message))]):s._e(),t("div",{staticClass:"d-flex justify-space-around"},[t("v-btn",{staticClass:"my-3",attrs:{text:"",color:"error"},domProps:{textContent:s._s("Отменить")},on:{click:s.clear}}),t("v-btn",{staticClass:"my-3",attrs:{text:"",color:"primary"},domProps:{textContent:s._s("Обновить")},on:{click:s.onSubmit}})],1)],1)],1)],1),t("v-bottom-sheet",{staticClass:"mx-auto",attrs:{persistent:""},scopedSlots:s._u([{key:"activator",fn:function(e){e.on,e.attrs;return[t("v-btn",{staticClass:"mr-4",attrs:{color:"primary",elevation:"9",outlined:""},on:{click:s.changePassword}},[s._v("Изменить пароль ")])]}}]),model:{value:s.passSheet,callback:function(e){s.passSheet=e},expression:"passSheet"}},[t("v-sheet",{staticClass:"text-center",attrs:{height:"250px"}},[t("v-container",[t("v-text-field",{attrs:{type:"password",label:"Введите старый пароль","error-messages":s.$v.$error?s.passwordErrors:[]},model:{value:s.user.password,callback:function(e){s.$set(s.user,"password","string"===typeof e?e.trim():e)},expression:"user.password"}}),t("v-text-field",{attrs:{type:"password",label:"Введите новый пароль","error-messages":s.$v.$error?s.newPasswordErrors:[]},model:{value:s.user.newPassword,callback:function(e){s.$set(s.user,"newPassword","string"===typeof e?e.trim():e)},expression:"user.newPassword"}}),s.message?t("v-card-text",[s._v(s._s(s.message))]):s._e(),t("div",{staticClass:"d-flex justify-space-around"},[t("v-btn",{staticClass:"my-3",attrs:{text:"",color:"error"},domProps:{textContent:s._s("Отменить")},on:{click:s.clear}}),t("v-btn",{staticClass:"my-3",attrs:{text:"",color:"primary"},domProps:{textContent:s._s("Обновить")},on:{click:s.changePassword}})],1)],1)],1)],1)],1)],1)],1)},a=[],i=t("1dce"),o=t("b5ae");const n=o["helpers"].regex("alpha",/^[a-zA-ZА-Яа-я]*$/);var l={mixins:[i["validationMixin"]],data:()=>({sheet:!1,passSheet:!1}),validations:{user:{name:{required:o["required"],alpha:n},surname:{required:o["required"],alpha:n},email:{required:o["required"],email:o["email"]},password:{required:o["required"],minLength:Object(o["minLength"])(8)},newPassword:{required:o["required"],minLength:Object(o["minLength"])(8)}}},methods:{clear(){this.user.password="",this.user.newPassword="",this.sheet=!1,this.passSheet=!1},async onSubmit(){if(this.$v.$touch(),this.nameErrors.length||this.surnameErrors.length||this.emailErrors.length||this.passwordErrors.length)this.nameErrors.length||this.surnameErrors.length||this.emailErrors.length||(this.sheet=!this.sheet);else{const s={email:this.user.email,password:this.user.password,name:this.user.name,surname:this.user.surname};await this.$store.dispatch("auth/updateUserInfo",s),this.message||(this.sheet=!1,this.clear())}},async changePassword(){if(this.$v.$touch(),this.passSheet=!0,!this.passwordErrors.length&&!this.newPasswordErrors.length){const s={password:this.user.password,newPassword:this.user.newPassword};await this.$store.dispatch("auth/changePassword",s),this.message||(this.clear(),this.passSheet=!1)}}},computed:{nameErrors(){const s=[];return this.$v.user.name.required||s.push("Введите имя"),this.$v.user.name.alpha||s.push("Имя должно быть корректно"),s},surnameErrors(){const s=[];return this.$v.user.surname.required||s.push("Введите фамилию"),this.$v.user.surname.alpha||s.push("Фамилия должна быть корректна"),s},emailErrors(){const s=[];return this.$v.user.email.email||s.push("Введите корректный e-mail"),this.$v.user.email.required||s.push("Введите E-mail"),s},passwordErrors(){const s=[];return this.$v.user.password.required||s.push("Введите пароль"),this.$v.user.password.minLength||s.push("Пароль должен быть не меньше 8 символов"),s},newPasswordErrors(){const s=[];return this.$v.user.newPassword.required||s.push("Введите пароль"),this.$v.user.newPassword.minLength||s.push("Пароль должен быть не меньше 8 символов"),s},message(){return this.$store.state.auth.authMessage},user(){return this.$store.state.auth.user}},async mounted(){},components:{}},u=l,h=t("2877"),d=t("6544"),c=t.n(d),m=(t("d0cd"),t("169a")),p=m["a"].extend({name:"v-bottom-sheet",props:{inset:Boolean,maxWidth:{type:[String,Number],default:"auto"},transition:{type:String,default:"bottom-sheet-transition"}},computed:{classes(){return{...m["a"].options.computed.classes.call(this),"v-bottom-sheet":!0,"v-bottom-sheet--inset":this.inset}}}}),v=t("8336"),w=t("99d9"),f=t("62ad"),g=t("a523"),$=t("ce7e"),b=t("4bd4"),x=t("132d"),y=t("0fd9"),_=t("8dd9"),E=t("8654"),C=Object(h["a"])(u,r,a,!1,null,"0336239a",null);e["default"]=C.exports;c()(C,{VBottomSheet:p,VBtn:v["a"],VCardText:w["b"],VCol:f["a"],VContainer:g["a"],VDivider:$["a"],VForm:b["a"],VIcon:x["a"],VRow:y["a"],VSheet:_["a"],VTextField:E["a"]})},"4bd4":function(s,e,t){"use strict";var r=t("58df"),a=t("7e2b"),i=t("3206");e["a"]=Object(r["a"])(a["a"],Object(i["b"])("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(s){const e=Object.values(s).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(s){const e=s=>s.$watch("hasError",e=>{this.$set(this.errorBag,s._uid,e)},{immediate:!0}),t={_uid:s._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?t.shouldValidate=s.$watch("shouldValidate",r=>{r&&(this.errorBag.hasOwnProperty(s._uid)||(t.valid=e(s)))}):t.valid=e(s),t},validate(){return 0===this.inputs.filter(s=>!s.validate(!0)).length},reset(){this.inputs.forEach(s=>s.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(s=>s.resetValidation()),this.resetErrorBag()},register(s){this.inputs.push(s),this.watchers.push(this.watchInput(s))},unregister(s){const e=this.inputs.find(e=>e._uid===s._uid);if(!e)return;const t=this.watchers.find(s=>s._uid===e._uid);t&&(t.valid(),t.shouldValidate()),this.watchers=this.watchers.filter(s=>s._uid!==e._uid),this.inputs=this.inputs.filter(s=>s._uid!==e._uid),this.$delete(this.errorBag,e._uid)}},render(s){return s("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:s=>this.$emit("submit",s)}},this.$slots.default)}})},"8ce9":function(s,e,t){},ce7e:function(s,e,t){"use strict";t("8ce9");var r=t("7560");e["a"]=r["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render(s){let e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),s("hr",{class:{"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical,...this.themeClasses},attrs:{role:"separator","aria-orientation":e,...this.$attrs},on:this.$listeners})}})},d0cd:function(s,e,t){}}]);
//# sourceMappingURL=chunk-15e6a010.baf2e3db.js.map